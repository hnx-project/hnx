# 同步原语 (Synchronization Primitives)

在 HNX 的开发演进过程中，为了促进代码复用和模块化，内核中的核心同步原语已从 `kernel/src/sync` 模块迁移至 `shared` 库的 `shared/src/sync` 模块。这一变动使得这些基础的同步机制可以在内核和用户空间服务之间共享和复用，从而减少了代码冗余，并提供了一致的并发编程接口。

## 迁移原因

-   **代码复用:** 许多同步原语（如互斥锁、信号量）在内核和用户空间服务中都有广泛需求。将它们集中到 `shared` 库中可以避免重复实现。
-   **模块化:** 将通用工具从内核中分离出来，有助于保持内核的精简性，并专注于其核心职责。
-   **一致性:** 为内核开发者和用户空间服务开发者提供一套统一、标准化的同步接口。

## 当前状态

-   **位置:** HNX 的所有核心同步原语，包括但不限于 `Mutex` (互斥锁)、`Semaphore` (信号量)、`Condvar` (条件变量) 和 `RwLock` (读写锁)，现在都位于 `shared/src/sync` 模块中。

-   **使用方式:** 内核以及所有依赖这些同步原语的 crate (包括用户空间服务) 现在都通过 `shared` 库来引入和使用这些原语。

## 详细文档

关于 HNX 同步原语的详细实现、用法和设计，请参考 `shared` 库中的文档：

-   [**HNX 同步原语**](../../shared/sync/mod.md)

该文档将提供每个同步原语的详细说明，包括其 API、行为特性以及在并发编程中的应用示例。